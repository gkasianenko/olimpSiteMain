/*!
 * vue-event-manager v2.1.2
 * https://github.com/pagekit/vue-event-manager
 * Released under the MIT License.
 */

!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.VueEventManager=t()}(this,function(){"use strict";var i={},u=Object.assign||function(e){var n=[],t=arguments.length-1;for(;0<t--;)n[t]=arguments[t+1];return n.forEach(function(t){Object.keys(t||{}).forEach(function(n){return e[n]=t[n]})}),e},s=Array.isArray;function f(n){return null!==n&&"object"==typeof n}function c(n){return void 0===n}function t(t,e){Object.keys(t||{}).forEach(function(n){return e.call(null,t[n],n)})}function a(n){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof n)throw new TypeError("predicate must be a function");for(var t=Object(this),e=t.length>>>0,r=arguments[1],o=0;o<e;){var i=t[o];if(n.call(r,i,o,t))return o;o++}return-1}var n=function(){this.log=null,this.listeners={}};n.prototype.on=function(n,t,e){var r=this;void 0===e&&(e=0);var o,i=(void 0===(o=this.listeners[n])&&(o=[]),o.findIndex||(o.findIndex=a),o),u=i.findIndex(function(n){return n.priority<e});return~u?i.splice(u,0,{callback:t,priority:e}):i.push({callback:t,priority:e}),this.listeners[n]=i,function(){return r.off(n,t)}},n.prototype.off=function(n,t){t||delete this.listeners[n];var e=this.listeners[n];if(e&&t){var r=e.findIndex(function(n){return n.callback===t});~r&&e.splice(r,1)}},n.prototype.trigger=function(n,t,o){void 0===t&&(t=[]),void 0===o&&(o=!1);var i=new p(n,t),u=function(n){return Promise.reject(n)},e=function(n){return c(n)?i.result:n};this.log&&this.log.call(this,i);var r=(this.listeners[i.name]||[]).concat().reduce(function(n,t){var e=t.callback,r=function(n){return c(n)||(i.result=n),!1===n&&i.stopPropagation(),i.isPropagationStopped()?i.result:e.apply(e,[i].concat(i.params))};return o?n.then(r,u):r(n)},o?Promise.resolve():void 0);return o?r.then(e,u):e(r)};var p=function(n,t){f(n)||(n={name:n}),s(t)||(t=[t]),u(this,n,{params:t,result:void 0})};p.prototype.stopPropagation=function(){this.stop=!0},p.prototype.isPropagationStopped=function(){return!0===this.stop};var l=new n,e={version:"2.1.2",install:function(n,t){var e,r,o;(void 0===t&&(t={}),this.installed)||(e=n.config,i=e,r=this.version,void 0===o&&(o="#41B883"),"undefined"!=typeof console&&i.devtools&&console.log("%c vue-event-manager %c "+r+" ","color: #fff; background: #35495E; padding: 1px; border-radius: 3px 0 0 3px;","color: #fff; background: "+o+"; padding: 1px; border-radius: 0 3px 3px 0;"),n.prototype.$events=n.events=u(l,t),n.prototype.$trigger=function(n,t,e){return void 0===t&&(t=[]),void 0===e&&(e=!1),f(n)||(n={name:n,origin:this}),l.trigger(n,t,e)},n.config.optionMergeStrategies.events=d,n.mixin({beforeCreate:v}))}};function d(n,t){if(!t)return n;if(!n)return t;var e=u({},n);for(var r in t){var o=e[r],i=t[r];o&&!s(o)&&(o=[o]),e[r]=o?o.concat(i):s(i)?i:[i]}return e}function v(){var r=this,o=[],n=this.$options.events;n&&(t(n,function(n,e){t(s(n)?n:[n],function(n){var t=0;f(n)&&(t=n.priority,n=n.handler),o.push(r.$events.on(e,function(n,t){if("string"==typeof n)return function(){return t[n].apply(t,arguments)};return n.bind(t)}(n,r),t))})}),this.$on("hook:beforeDestroy",function(){return o.forEach(function(n){return n()})}))}return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});